# ============================================================================
# LDAP Authentication Configuration
# ============================================================================
# This file contains all LDAP-related environment variables for Active Directory
# or OpenLDAP integration.
#
# Usage:
# 1. Copy this file to .env.ldap
# 2. Update the values to match your LDAP/AD server
# 3. Source it in your deployment: docker-compose --env-file .env --env-file .env.ldap up
#
# To disable LDAP, simply don't load this file or leave LDAP_SERVER_URI empty.
# ============================================================================

# LDAP Server Configuration
# ============================================================================
# LDAP server URL (ldap:// for plain, ldaps:// for SSL)
# Examples:
#   - Active Directory: ldap://ad.company.com:389 or ldaps://ad.company.com:636
#   - OpenLDAP: ldap://ldap.company.com:389
LDAP_SERVER_URI=ldap://your-ldap-server:389

# LDAP Bind DN (service account for LDAP queries)
# Examples:
#   - Active Directory: CN=svc_swim,OU=Service Accounts,DC=company,DC=com
#   - OpenLDAP: cn=admin,dc=example,dc=com
LDAP_BIND_DN=cn=admin,dc=example,dc=com

# LDAP Bind Password (service account password)
LDAP_BIND_PASSWORD=your-ldap-password

# User Search Configuration
# ============================================================================
# Base DN where user accounts are located
# Examples:
#   - Active Directory: OU=Users,DC=company,DC=com
#   - OpenLDAP: ou=users,dc=example,dc=com
LDAP_USER_SEARCH_BASE=ou=users,dc=example,dc=com

# User search filter (optional - defaults to uid or sAMAccountName)
# Examples:
#   - Active Directory: (sAMAccountName=%(user)s)
#   - OpenLDAP: (uid=%(user)s)
# LDAP_USER_SEARCH_FILTER=(uid=%(user)s)

# Group Search Configuration (Optional)
# ============================================================================
# Base DN where groups are located
# Examples:
#   - Active Directory: OU=Groups,DC=company,DC=com
#   - OpenLDAP: ou=groups,dc=example,dc=com
# LDAP_GROUP_SEARCH_BASE=ou=groups,dc=example,dc=com

# Group type (optional - defaults to GroupOfNamesType)
# Options: GroupOfNamesType, NestedGroupOfNamesType, ActiveDirectoryGroupType
# LDAP_GROUP_TYPE=ActiveDirectoryGroupType

# Require LDAP group membership for access
# Set to specific group DN to restrict access
# Example: CN=Network_Engineers,OU=Groups,DC=company,DC=com
# LDAP_REQUIRE_GROUP=

# User Attribute Mapping
# ============================================================================
# Map LDAP attributes to Django user fields
# Defaults work for most setups, uncomment to customize

# First name attribute (default: givenName)
# LDAP_ATTR_FIRST_NAME=givenName

# Last name attribute (default: sn)
# LDAP_ATTR_LAST_NAME=sn

# Email attribute (default: mail)
# LDAP_ATTR_EMAIL=mail

# Additional Options
# ============================================================================
# Enable LDAP debugging (set to True for troubleshooting)
LDAP_DEBUG=False

# Start TLS after connecting (recommended for ldap://)
# LDAP_START_TLS=True

# Mirror LDAP groups to Django groups (auto-sync group membership)
# LDAP_MIRROR_GROUPS=True

# Auto-create Django users on first LDAP login
LDAP_AUTO_CREATE_USERS=True

# User Flags by Group Membership (Django Permissions)
# ============================================================================
# Map Active Directory groups to Django user permissions
# Users in these AD groups will automatically get the corresponding Django flags

# AD group for Django admin/staff access (can access /admin/ panel)
# Example: CN=SWIM_Admins,OU=Groups,DC=company,DC=com
# LDAP_GROUP_STAFF=CN=SWIM_Admins,OU=Groups,DC=company,DC=com

# AD group for Django superuser access (full admin privileges)
# Example: CN=SWIM_SuperUsers,OU=Groups,DC=company,DC=com
# LDAP_GROUP_SUPERUSER=CN=SWIM_SuperUsers,OU=Groups,DC=company,DC=com

# AD group for active users (can login to SWIM)
# If not set, all authenticated LDAP users are active by default
# Example: CN=SWIM_Users,OU=Groups,DC=company,DC=com
# LDAP_GROUP_ACTIVE=CN=SWIM_Users,OU=Groups,DC=company,DC=com

# ============================================================================
# Active Directory Example Configuration
# ============================================================================
# LDAP_SERVER_URI=ldaps://ad.company.com:636
# LDAP_BIND_DN=CN=svc_swim,OU=Service Accounts,DC=company,DC=com
# LDAP_BIND_PASSWORD=ServiceAccountPassword123
# LDAP_USER_SEARCH_BASE=OU=Users,DC=company,DC=com
# LDAP_USER_SEARCH_FILTER=(sAMAccountName=%(user)s)
# LDAP_GROUP_SEARCH_BASE=OU=Groups,DC=company,DC=com
# LDAP_GROUP_TYPE=ActiveDirectoryGroupType
# LDAP_REQUIRE_GROUP=CN=Network_Engineers,OU=Groups,DC=company,DC=com
# LDAP_ATTR_FIRST_NAME=givenName
# LDAP_ATTR_LAST_NAME=sn
# LDAP_ATTR_EMAIL=mail
# LDAP_MIRROR_GROUPS=True
# LDAP_AUTO_CREATE_USERS=True
# LDAP_GROUP_STAFF=CN=SWIM_Admins,OU=Groups,DC=company,DC=com
# LDAP_GROUP_SUPERUSER=CN=SWIM_SuperUsers,OU=Groups,DC=company,DC=com

# ============================================================================
# OpenLDAP Example Configuration
# ============================================================================
# LDAP_SERVER_URI=ldap://ldap.company.com:389
# LDAP_BIND_DN=cn=admin,dc=company,dc=com
# LDAP_BIND_PASSWORD=AdminPassword123
# LDAP_USER_SEARCH_BASE=ou=people,dc=company,dc=com
# LDAP_USER_SEARCH_FILTER=(uid=%(user)s)
# LDAP_GROUP_SEARCH_BASE=ou=groups,dc=company,dc=com
# LDAP_START_TLS=True
# LDAP_AUTO_CREATE_USERS=True
# LDAP_GROUP_STAFF=CN=SWIM_Admins,OU=Groups,DC=company,DC=com
# LDAP_GROUP_SUPERUSER=CN=SWIM_SuperUsers,OU=Groups,DC=company,DC=com
